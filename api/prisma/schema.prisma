generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id       Int    @id @default(autoincrement())
  name     String @unique
  password String
}

model ImageCategory {
  id     Int     @id @default(autoincrement())
  name   String  @unique
  images Image[]
}

model Image {
  id          Int            @id @default(autoincrement())
  name        String         @unique
  projectId   Int?
  project     Project?       @relation("ProjectImages", fields: [projectId], references: [id])
  stackLogo   Stack?         @relation("StackLogo")

  categoryId  Int?
  category    ImageCategory? @relation(fields: [categoryId], references: [id])
}

model ProjectCategory {
  id       Int       @id @default(autoincrement())
  name     String    @unique
  projects Project[]
}

model Project {
  id              Int              @id @default(autoincrement())
  name            String           @unique
  description     String
  more_info       String
  deploy_link     String
  repository_link String
  images          Image[]          @relation("ProjectImages")
  stacks          ProjectStack[]

  categoryId      Int?
  category        ProjectCategory? @relation(fields: [categoryId], references: [id])
}

model ProjectStack {
  projectId Int
  stackId   Int
  stack     Stack   @relation(fields: [stackId], references: [id])
  project   Project @relation(fields: [projectId], references: [id])

  @@id([projectId, stackId])
}

model Stack {
  id         Int            @id @default(autoincrement())
  name       String
  experience Int
  logoId     Int            @unique
  projects   ProjectStack[]
  logo       Image          @relation("StackLogo", fields: [logoId], references: [id])
}
